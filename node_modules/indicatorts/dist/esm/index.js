function b(...e){if(e.length>0){let o=e[0].length;for(let r=1;r<e.length;r++)if(e[r].length!==o)throw new Error(`values length at ${r} not ${o}`)}}function L(e){return e.map(o=>Math.abs(o))}function h(e,o){b(e,o);let r=new Array(e.length);for(let t=0;t<r.length;t++)r[t]=e[t]+o[t];return r}function M(e,o){let r=new Array(o.length);for(let t=0;t<o.length;t++)r[t]=o[t]+e;return r}function l(e,o){b(e,o);let r=new Array(e.length);for(let t=0;t<r.length;t++)r[t]=e[t]/o[t];return r}function R(e,o){let r=new Array(o.length);for(let t=0;t<o.length;t++)r[t]=o[t]/e;return r}function x(e,o){b(e,o);let r=new Array(e.length);for(let t=0;t<r.length;t++)r[t]=e[t]*o[t];return r}function p(e,o){let r=new Array(o.length);for(let t=0;t<r.length;t++)r[t]=o[t]*e;return r}function u(e,o){b(e,o);let r=new Array(e.length);for(let t=0;t<r.length;t++)r[t]=e[t]-o[t];return r}function sr(e,o){let r=new Array(o.length);for(let t=0;t<o.length;t++)r[t]=o[t]-e;return r}function O(e,o,r){let t=new Array(r.length);for(let i=0;i<t.length;i++)i<e?t[i]=o:t[i]=r[i-e];return t}function F(e,o){return O(e,0,o)}function xt(e,o,r){let t=r.length,i=Array(t).fill(o);for(let n=e;n<t;n++){let m=(n-e+t)%t;i[m]=r[n]}return i}function pe(e,o){return xt(e,0,o)}function E(e,o){return u(o,F(e,o))}function ge(e){return e.map(o=>o>=0?1:-1)}function ht(...e){b(...e);let o=new Array(e[0].length);for(let r=0;r<o.length;r++){o[r]=new Array(e.length);for(let t=0;t<o[r].length;t++)o[r][t]=e[t][r]}return o}function V(...e){return ht(...e).map(o=>Math.max(...o))}function G(e,o){let r=Math.pow(10,e);return Math.round(o*r)/r}function ur(e,o){return o.map(r=>G(e,r))}function T(e,o,r){let t=new Array((o-e)/r);for(let i=0;i<t.length;i++)t[i]=e+r*i;return t}function de(e,o){return e.map(r=>Math.pow(r,o))}function be(e){return e.map(o=>Math.sqrt(o))}function xe(e,o){b(e,o);let r=new Array(e.length),t=1,i=t,n=0;for(let m=0;m<r.length;m++)o[m]===1?i>0&&(n=i/e[m],i=0):o[m]===-1&&n>0&&(i=n*e[m],n=0),r[m]=(n*e[m]+i-t)/t;return r}function pr(e,o){let r=new Array(o.length);for(let t=0;t<r.length;t++){let i=o[t].strategy(e),n=xe(e.closings,i);r[t]={info:o[t],gain:n[n.length-1],lastAction:i[i.length-1]}}return r.sort((t,i)=>i.gain-t.gain),r}var Ct=(n=>(n[n.SYMBOL=0]="SYMBOL",n[n.NAME=1]="NAME",n[n.STRATEGY=2]="STRATEGY",n[n.GAIN=3]="GAIN",n[n.ACTION=4]="ACTION",n))(Ct||{});function dr(e,o,r){let t=[];switch(o){case 0:t=e.sort((i,n)=>i.companyInfo.symbol.localeCompare(n.companyInfo.symbol));break;case 1:t=e.sort((i,n)=>i.companyInfo.name.localeCompare(n.companyInfo.name));break;case 2:t=e.sort((i,n)=>i.strategyResults[0].info.name.localeCompare(n.strategyResults[0].info.name));break;case 3:t=e.sort((i,n)=>i.strategyResults[0].gain-n.strategyResults[0].gain);break;case 4:t=e.sort((i,n)=>i.strategyResults[0].lastAction-n.strategyResults[0].lastAction);break}return r||(t=t.reverse()),t}function he(e){return Array(e.closings.length).fill(1)}var At={period:2};function d(e,o={}){let{period:r}={...At,...o},t=new Array(e.length),i=0;for(let n=0;n<e.length;n++)i+=e[n],n>=r?(i-=e[n-r],t[n]=i/r):t[n]=i/(n+1);return t}var U={fast:5,slow:34};function Ce(e,o,r={}){let{fast:t,slow:i}={...U,...r},n=R(2,h(o,e)),m=d(n,{period:t}),s=d(n,{period:i});return u(m,s)}function Ae(e,o={}){let r={...U,...o};return Ce(e.highs,e.lows,r).map(i=>i>0?1:i<0?-1:0)}var Y={short:9,medium:26,long:52,close:26},W=({period:e,highs:o,lows:r,projection:t=0})=>(i,n,m)=>{if(m<e-1)return[...i,0];let s=m+1-e,c=m-t+1,a=Math.max(...o.slice(s,c)),f=Math.min(...r.slice(s,c));return[...i,(a+f)/2]},yt=({highs:e,lows:o,short:r})=>e.reduce(W({period:r,highs:e,lows:o}),[]),St=({highs:e,lows:o,medium:r})=>e.reduce(W({period:r,highs:e,lows:o}),[]),Rt=({tenkanSen:e,kijunSen:o,medium:r})=>{let t=new Array(o.length+r).fill(0);return o.forEach((i,n)=>{i&&(t[n+r]=(i+e[n])/2)}),t},wt=({highs:e,lows:o,long:r,medium:t})=>new Array(e.length+t).fill(0).reduce(W({period:r+t,highs:e,lows:o,projection:t}),[]);function ye(e,o,r,t={}){b(e,o,r);let{short:i,medium:n,long:m,close:s}={...Y,...t},c=yt({highs:e,lows:o,short:i}),a=St({highs:e,lows:o,medium:n});return{tenkan:c,kijun:a,ssa:Rt({tenkanSen:c,kijunSen:a,medium:n}),ssb:wt({highs:e,lows:o,medium:n,long:m}),laggingSpan:pe(s,r)}}function Se(e,o={}){let r={...Y,...o},t=ye(e.highs,e.lows,e.closings,r),i=new Array(t.kijun.length);for(let n=0;n<i.length;n++)t.ssa[n]>t.ssb[n]?i[n]=1:t.ssa[n]<t.ssb[n]?i[n]=-1:i[n]=0;return i}var Mt={period:4};function j(e,o={}){let{period:r}={...Mt,...o},t=new Array(e.length),i=0;for(let n=0;n<e.length;n++){let m=n+1;n<r?i+=e[n]:(i=t[n-1]*(r-1)+e[n],m=r),t[n]=i/m}return t}var Dt={period:14};function Re(e,o={}){let{period:r}={...Dt,...o},t=new Array(e.length),i=new Array(e.length);t[0]=i[0]=0;for(let a=1;a<e.length;a++){let f=e[a]-e[a-1];f>0?(t[a]=f,i[a]=0):(i[a]=-f,t[a]=0)}let n=j(t,{period:r}),m=j(i,{period:r}),s=new Array(e.length),c=new Array(e.length);s[0]=c[0]=0;for(let a=1;a<e.length;a++)c[a]=n[a]/m[a],s[a]=100-100/(1+c[a]);return s}function we(e){let o=Re(e.closings,{period:2}),r=new Array(o.length);for(let t=0;t<r.length;t++)o[t]<10?r[t]=1:o[t]>90?r[t]=-1:r[t]=0;return r}var P=class e{constructor(){this.root=null}insert(o){let r={value:o,left:null,right:null};if(this.root===null){this.root=r;return}let t=this.root,i=!1;for(;!i;)r.value<=t.value?t.left===null?(t.left=r,i=!0):t=t.left:t.right===null?(t.right=r,i=!0):t=t.right}remove(o){let r={node:this.root,parent:null};for(;r.node!==null;){if(o===r.node.value)return this.removeNode(r),!0;r.parent=r.node,o<r.node.value?r.node=r.node.left:r.node=r.node.right}return!1}min(){let o=e.minNode(this.root);if(o.node===null)throw new Error("Tree empty");return o.node.value}max(){let o=e.maxNode(this.root);if(o.node===null)throw new Error("Tree empty");return o.node?.value}removeNode(o){if(o.node!==null)if(o.node.left!==null&&o.node.right!==null){let r=e.minNode(o.node.right);r.parent===null&&(r.parent=o.node),this.removeNode(r),r.node!==null&&(o.node.value=r.node.value)}else{let r=null;o.node.left!==null?r=o.node.left:r=o.node.right,o.parent===null?this.root=r:o.parent.left===o.node?o.parent.left=r:o.parent.right=r}}static minNode(o){let r={node:null,parent:null};if(o!==null)for(r.node=o;r.node.left!==null;)r.parent=r.node,r.node=r.node.left;return r}static maxNode(o){let r={node:null,parent:null};if(o!==null)for(r.node=o;r.node.right!==null;)r.parent=r.node,r.node=r.node.right;return r}};var Lt={period:4};function S(e,o={}){let{period:r}={...Lt,...o},t=new Array(e.length),i=new P;for(let n=0;n<e.length;n++)i.insert(e[n]),n>=r&&i.remove(e[n-r]),t[n]=i.min();return t}var vt={period:4};function y(e,o={}){let{period:r}={...vt,...o},t=new Array(e.length),i=new P;for(let n=0;n<e.length;n++)i.insert(e[n]),n>=r&&i.remove(e[n-r]),t[n]=i.max();return t}var K={kPeriod:14,dPeriod:3};function Me(e,o,r,t={}){let{kPeriod:i,dPeriod:n}={...K,...t},m=y(e,{period:i}),s=S(o,{period:i}),c=p(100,l(u(r,s),u(m,s))),a=d(c,{period:n});return{k:c,d:a}}function De(e,o={}){let r={...K,...o},t=Me(e.highs,e.lows,e.closings,r),i=new Array(t.k.length);for(let n=0;n<i.length;n++)t.k[n]>=80&&t.d[n]>=80?i[n]=-1:t.k[n]<=20&&t.d[n]<=20?i[n]=1:i[n]=0;return i}var X={period:14};function Le(e,o,r,t={}){let{period:i}={...X,...t},n=y(e,{period:i}),m=S(o,{period:i});return p(-100,l(u(n,r),u(n,m)))}function ve(e,o={}){let r={...X,...o};return Le(e.highs,e.lows,e.closings,r).map(i=>i<=-80?1:i>=-20?-1:0)}var It={period:12};function g(e,o={}){let{period:r}={...It,...o},t=new Array(e.length);if(t.length>0){let i=2/(1+r),n=1-i;t[0]=e[0];for(let m=1;m<t.length;m++)t[m]=e[m]*i+t[m-1]*n}return t}var J={fast:14,slow:30};function Ie(e,o={}){let{fast:r,slow:t}={...J,...o},i=g(e,{period:r}),n=g(e,{period:t});return u(i,n)}function Oe(e,o={}){let{fast:r,slow:t}={...J,...o},i=Ie(e.closings,{fast:r,slow:t}),n=new Array(i.length);for(let m=0;m<n.length;m++)i[m]>0?n[m]=1:i[m]<0?n[m]=-1:n[m]=0;return n}function _(e){let o=new Array(e.length);if(e.length>0){let r=null,t=0;for(let i=0;i<e.length;i++)r!==e[i]?(r=e[i],t=0):t++,o[i]=t}return o}var Q={period:25};function Be(e,o,r={}){b(e,o);let{period:t}={...Q,...r},i=_(y(e,{period:t})),n=_(S(o,{period:t})),m=p(100,R(t,M(t,p(-1,i)))),s=p(100,R(t,M(t,p(-1,n))));return{up:m,down:s}}function Ee(e,o={}){let r={...Q,...o},t=Be(e.highs,e.lows,r),i=new Array(t.up.length);for(let n=0;n<i.length;n++)t.up[n]>t.down[n]?i[n]=1:t.down[n]>t.up[n]?i[n]=-1:i[n]=0;return i}function Pe(e,o,r,t){return l(u(t,e),u(o,r))}function ke(e){return Pe(e.openings,e.highs,e.lows,e.closings).map(r=>r>0?1:r<0?-1:0)}function Ot(e,o){b(e,o);let r=0,t=0,i=0,n=0;for(let a=0;a<e.length;a++)r+=e[a],t+=e[a]*e[a],i+=o[a],n+=e[a]*o[a];let m=e.length,s=(m*n-r*i)/(m*t-r*r),c=(i-s*r)/m;return{m:s,b:c}}function N(e,o,r){b(o,r);let t=new Array(o.length),i=new Array(o.length),n=0,m=0,s=0,c=0;for(let a=0;a<o.length;a++){n+=o[a],m+=o[a]*o[a],s+=r[a],c+=o[a]*r[a];let f=a+1;a>=e&&(n-=o[a-e],m-=o[a-e]*o[a-e],s-=r[a-e],c-=o[a-e]*r[a-e],f=e),a>0?(t[a]=(f*c-n*s)/(f*m-n*n),i[a]=(s-t[a]*n)/f):(t[a]=0,i[a]=0)}return{m:t,b:i}}function Fe(e,o){let r=Ot(e,o);return M(r.b,p(r.m,e))}function Te(e,o,r){let t=N(e,o,r);return h(x(t.m,o),t.b)}var Fo={period:4};function Ve(e){let o=T(0,e.length,1),r=Fe(o,e);return p(100,l(u(e,r),e))}var Bt={period:4};function To(e,o={}){let{period:r}={...Bt,...o},t=T(0,e.length,1),i=Te(r,t,e);return p(100,l(u(e,i),e))}function Ne(e){return Ve(e.closings).map(r=>r>0?1:r<0?-1:0)}var $={rPeriod:9,kPeriod:3,dPeriod:3};function qe(e,o,r,t={}){let{rPeriod:i,kPeriod:n,dPeriod:m}={...$,...t},s=y(e,{period:i}),c=S(o,{period:i}),a=p(100,l(u(r,c),u(s,c))),f=d(a,{period:n}),w=d(f,{period:m}),I=u(p(3,f),p(2,w));return{k:f,d:w,j:I}}function He(e,o={}){let r={...$,...o},t=qe(e.highs,e.lows,e.closings,r),i=new Array(t.k.length);for(let n=0;n<i.length;n++)t.k[n]>t.d[n]&&t.k[n]<=20?i[n]=1:t.k[n]<t.d[n]&&t.k[n]>=80?i[n]=-1:i[n]=0;return i}var z={fast:12,slow:26,signal:9};function Ge(e,o={}){let{fast:r,slow:t,signal:i}={...z,...o},n=g(e,{period:r}),m=g(e,{period:t}),s=u(n,m),c=g(s,{period:i});return{macdLine:s,signalLine:c}}function Ue(e,o={}){let r={...z,...o},t=Ge(e.closings,r),i=new Array(t.macdLine.length);for(let n=0;n<i.length;n++)t.macdLine[n]>t.signalLine[n]?i[n]=1:t.macdLine[n]<t.signalLine[n]?i[n]=-1:i[n]=0;return i}var Z=(t=>(t[t.FALLING=-1]="FALLING",t[t.STABLE=0]="STABLE",t[t.RISING=1]="RISING",t))(Z||{});var ee={step:.02,max:.2};function Ye(e,o,r,t={}){b(e,o,r);let{step:i,max:n}={...ee,...t},m=new Array(e.length),s=new Array(e.length);m[0]=-1,s[0]=e[0];let c=i,a=o[0];for(let f=1;f<s.length;f++){s[f]=s[f-1]-(s[f-1]-a)*c,m[f-1]===-1?(s[f]=Math.max(s[f],e[f-1]),f>1&&(s[f]=Math.max(s[f],e[f-2])),e[f]>=s[f]&&(s[f]=a)):(s[f]=Math.min(s[f],o[f-1]),f>1&&(s[f]=Math.min(s[f],o[f-2])),o[f]<=s[f]&&(s[f]=a));let w=a;s[f]>r[f]?(m[f]=-1,a=Math.min(a,o[f])):(m[f]=1,a=Math.max(a,e[f])),m[f]!==m[f-1]?c=i:w!==a&&c<n&&(c+=i)}return{trends:m,psarResult:s}}function We(e,o={}){let r={...ee,...o};return Ye(e.highs,e.lows,e.closings,r).trends.map(i=>{switch(i){case-1:return-1;case 1:return 1;case 0:return 0;default:return 0}})}function k(e,o,r){return R(3,h(h(e,o),r))}function je(e){let o=k(e.highs,e.lows,e.closings),r=new Array(o.length);r[0]=0;for(let t=1;t<r.length;t++)o[t]>o[t-1]?r[t]=1:o[t]<o[t-1]?r[t]=-1:r[t]=0;return r}var Et={period:4};function A(e,o={}){let{period:r}={...Et,...o},t=new Array(e.length),i=0;for(let n=0;n<e.length;n++)i+=e[n],n>=r&&(i-=e[n-r]),t[n]=i;return t}var te={period:14};function Ke(e,o,r,t={}){b(e,o,r);let{period:i}={...te,...t},n=F(1,r),m=L(u(e,F(1,o))),s=L(u(o,F(1,e))),c=A(m,{period:i}),a=A(s,{period:i}),f=V(u(e,o),L(u(e,n)),L(u(o,n))),w=A(f,{period:i}),I=l(c,w),D=l(a,w);return{plus:I,minus:D}}function Xe(e,o={}){let r={...te,...o},t=Ke(e.highs,e.lows,e.closings,r),i=new Array(t.plus.length);for(let n=0;n<i.length;n++)t.plus[n]>t.minus[n]?i[n]=1:t.plus[n]<t.minus[n]?i[n]=-1:i[n]=0;return i}var re={period:20,multiplier:4};function Je(e,o,r,t={}){b(e,o,r);let{period:i,multiplier:n}={...re,...t},m=l(u(e,o),h(e,o)),s=d(x(e,M(1,p(n,m))),{period:i}),c=d(r,{period:i}),a=d(x(o,M(1,p(-1*n,m))),{period:i});return{upper:s,middle:c,lower:a}}function _e(e,o={}){let r={...re,...o},t=Je(e.highs,e.lows,e.closings,r),i=new Array(t.upper.length);for(let n=0;n<i.length;n++)e.closings[n]>=t.upper[n]?i[n]=1:i[n]=-1;return i}var Pt={period:4};function Qe(e,o={}){let{period:r}={...Pt,...o},t=new Array(e.length),i=d(e,{period:r});for(let n=0;n<e.length;n++)if(t[n]=0,n>=r-1){let m=0;for(let s=n-(r-1);s<=n;s++)m+=(e[s]-i[n])*(e[s]-i[n]);t[n]=Math.sqrt(m/r)}return t}var oe={period:20};function $e(e,o={}){let{period:r}={...oe,...o},t=p(2,Qe(e,{period:r})),i=d(e,{period:r}),n=h(i,t),m=u(i,t);return{upper:n,middle:i,lower:m}}function ze(e,o={}){let r={...oe,...o},t=$e(e.closings,r),i=new Array(t.upper.length);for(let n=0;n<i.length;n++)e.closings[n]>t.upper[n]?i[n]=-1:e.closings[n]<t.lower[n]?i[n]=1:i[n]=0;return i}var ne={period:14,smooth:3};function Ze(e,o,r,t={}){let{period:i,smooth:n}={...ne,...t},m=T(0,r.length,1),s=N(i,m,e),c=N(i,m,o),a=h(e,x(s.m,m)),f=h(o,x(c.m,m)),w=y(a,{period:i}),I=S(f,{period:i}),D=l(p(100,u(r,I)),u(w,I)),bt=g(D,{period:n});return{poResult:D,spoResult:bt}}function et(e,o={}){let r={...ne,...o},t=Ze(e.highs,e.lows,e.closings,r),i=new Array(t.poResult.length);for(let n=0;n<i.length;n++)t.poResult[n]>t.spoResult[n]?i[n]=1:t.poResult[n]<t.spoResult[n]?i[n]=-1:i[n]=0;return i}var ie={period:20};function tt(e,o,r,t,i={}){let{period:n}={...ie,...i},m=l(u(u(r,o),u(e,r)),u(e,o)),s=x(m,t);return l(A(s,{period:n}),A(t,{period:n}))}function rt(e,o={}){let r={...ie,...o};return tt(e.highs,e.lows,e.closings,e.volumes,r).map(i=>i<0?1:i>0?-1:0)}var me={period:14};function ot(e,o,r,t={}){let{period:i}={...me,...t},n=E(1,R(2,h(e,o))),m=l(R(1e8,r),u(e,o));return d(l(n,m),{period:i})}function nt(e,o={}){let r={...me,...o};return ot(e.highs,e.lows,e.volumes,r).map(i=>i>0?1:i<0?-1:0)}var se={period:13};function it(e,o,r={}){let{period:t}={...se,...r};return g(x(E(1,e),o),{period:t})}function mt(e,o={}){let r={...se,...o};return it(e.closings,e.volumes,r).map(i=>i>0?1:i<0?-1:0)}var ue={period:14};function st(e,o,r,t,i={}){let{period:n}={...ue,...i},m=x(k(e,o,r),t),s=ge(E(1,m)),c=x(s,m),a=c.map(D=>D>=0?D:0),f=c.map(D=>D<0?D:0),w=l(A(a,{period:n}),A(p(-1,f),{period:n}));return M(100,p(-100,de(M(1,w),-1)))}function ut(e,o={}){let r={...ue,...o};return st(e.highs,e.lows,e.closings,e.volumes,r).map(i=>i>=80?-1:1)}var ae={start:1e3,period:255};function at(e,o,r={}){b(e,o);let{start:t}={...ae,...r},i=new Array(e.length);for(let n=0;n<i.length;n++)n===0?i[n]=t:o[n-1]<o[n]?i[n]=i[n-1]:i[n]=i[n-1]+(e[n]-e[n-1])/e[n-1]*i[n-1];return i}function ft(e,o={}){let r={...ae,...o},t=at(e.closings,e.volumes,r),i=g(t,{period:r.period}),n=new Array(t.length);for(let m=0;m<n.length;m++)t[m]<i[m]?n[m]=1:t[m]>i[m]?n[m]=-1:n[m]=0;return n}var fe={period:14};function ct(e,o,r={}){let{period:t}={...fe,...r};return l(A(x(e,o),{period:t}),A(o,{period:t}))}function lt(e,o={}){let r={...fe,...o},t=ct(e.closings,e.volumes,r);return u(t,e.closings).map(n=>n>0?1:n<0?-1:0)}var pm=[{name:"Buy Hold",strategy:he},{name:"Awesome Oscillator",strategy:Ae},{name:"RSI 2",strategy:we},{name:"Ichimoku Cloud",strategy:Se},{name:"Stochastic Oscillator",strategy:De},{name:"Williams R",strategy:ve},{name:"Absolute Price Oscillator (APO)",strategy:Oe},{name:"Aroon Strategy",strategy:Ee},{name:"Balance of Power (BOM)",strategy:ke},{name:"Chande Forecast Oscillator (CFO)",strategy:Ne},{name:"KDJ Strategy",strategy:He},{name:"MACD Strategy",strategy:Ue},{name:"Parabolic SAR",strategy:We},{name:"Typical Price",strategy:je},{name:"Vortex Strategy",strategy:Xe},{name:"Acceleration Bands",strategy:_e},{name:"Bollinger Bands",strategy:ze},{name:"Projection Oscillator",strategy:et},{name:"Chaikin Money Flow (CMF)",strategy:rt},{name:"Ease of Movement (EMV)",strategy:nt},{name:"Force Index",strategy:mt},{name:"Money Flow Index",strategy:ut},{name:"Negative Volume Index (NVI)",strategy:ft},{name:"Volume Weighted Average Price",strategy:lt}];function kt(e){return{strategyInfo:e.info,score:1,minGain:e.gain,maxGain:e.gain,averageGain:e.gain}}function Ft(e,o){e.score++,e.minGain=Math.min(e.minGain,o.gain),e.maxGain=Math.max(e.maxGain,o.gain),e.averageGain=(e.averageGain+o.gain)/2}function dm(e){let o=new Map;for(let t of e){let i=t.strategyResults[0],n=o.get(i.info.name);n!==void 0?Ft(n,i):o.set(i.info.name,kt(i))}let r=Array.from(o.values());return r.sort((t,i)=>i.score-t.score),r}var Tt=(n=>(n[n.STRATEGY=0]="STRATEGY",n[n.SCORE=1]="SCORE",n[n.MIN=2]="MIN",n[n.MAX=3]="MAX",n[n.AVERAGE=4]="AVERAGE",n))(Tt||{});function bm(e,o,r){let t=[];switch(o){case 0:t=e.sort((i,n)=>i.strategyInfo.name.localeCompare(n.strategyInfo.name));break;case 1:t=e.sort((i,n)=>i.score-n.score);break;case 2:t=e.sort((i,n)=>i.minGain-n.minGain);break;case 3:t=e.sort((i,n)=>i.maxGain-n.maxGain);break;case 4:t=e.sort((i,n)=>i.averageGain-n.averageGain);break}return r||(t=t.reverse()),t}var v=class e{constructor(o,r){this.min=o,this.max=r}getMin(){return this.min}getMax(){return this.max}span(){return this.max-this.min}static merge(o){return o.reduce((r,t)=>new e(Math.min(r.min,t.min),Math.max(r.max,t.max)))}static from(o){return new e(Math.min(...o),Math.max(...o))}};var B=class{constructor(o,r){this.fromDelta=o.getMin(),this.toDelta=r.getMin(),this.multiplier=r.span()/o.span()}scale(o){return(o-this.fromDelta)*this.multiplier+this.toDelta}descale(o){return(o-this.toDelta)/this.multiplier+this.fromDelta}};var Vt="black",Nt=1,qt="red",Ht=1,Gt=30,ce=4,Ut="14px Arial",le=-1,q=new v(0,1),pt=class{constructor(o){let r=document.getElementById(o);if(r===null)throw new Error("Canvas element not found");if(!(r instanceof HTMLCanvasElement))throw new Error("Not a canvas element");this.canvas=r;let t=this.canvas.getContext("2d");if(t===null)throw new Error("Canvas context is null");this.context=t,this.dataSets=new Map,this.dateSetsChanged=!1,this.xScaler=new B(q,q),this.yScaler=new B(q,q),this.xFocus=le,this.canvas.addEventListener("mousemove",i=>this.onMouseMove(i)),this.canvas.addEventListener("mouseout",()=>this.onMouseOut())}add(o){this.dataSets.set(o.legend,o),this.dateSetsChanged=!0}remove(o){let r=this.dataSets.delete(o);return r&&(this.dateSetsChanged=!0),r}draw(){this.dateSetsChanged&&(this.updateScalers(),this.dateSetsChanged=!1),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.drawDataSets(),this.drawFocus()}drawDataSets(){let o=this.chartHeight();for(let r of this.dataSets.values()){this.context.lineWidth=r.width??Nt;let t=0,i=0;for(let n=0;n<r.values.length;n++){let m=this.xScaler.scale(n),s=o-this.yScaler.scale(r.values[n]);n>0&&(this.context.strokeStyle=this.styleAtIndex(r,n),this.context.beginPath(),this.context.moveTo(t,i),this.context.lineTo(m,s),this.context.stroke()),t=m,i=s}}}styleAtIndex(o,r){return o.style===void 0?Vt:Array.isArray(o.style)?o.style[r]:o.style}drawFocus(){this.xFocus!==le&&(this.drawFocusLine(),this.drawFocusedValues())}drawFocusLine(){this.context.strokeStyle=qt,this.context.lineWidth=Ht,this.context.beginPath(),this.context.moveTo(this.xFocus,0),this.context.lineTo(this.xFocus,this.chartHeight()),this.context.stroke()}drawFocusedValues(){let o=Math.round(this.xScaler.descale(this.xFocus)),r=ce;this.context.font=Ut,this.context.textBaseline="bottom";for(let t of this.dataSets.values())if(o>=0&&o<t.values.length){let i=t.legend+" "+G(2,t.values[o]).toString();this.context.fillStyle=this.styleAtIndex(t,o),this.context.fillText(i,r,this.canvas.height-ce),r+=this.context.measureText(i).width+ce}}chartHeight(){return this.canvas.height-Gt}updateScalers(){this.dataSets.size!==0&&(this.xScaler=new B(new v(0,Math.max(...Array.from(this.dataSets.values(),o=>o.values.length))),new v(0,this.canvas.width)),this.yScaler=new B(v.merge(Array.from(this.dataSets.values(),o=>v.from(o.values))),new v(0,this.chartHeight())))}onMouseMove(o){let r=this.canvas.getBoundingClientRect();this.xFocus=o.clientX-r.left,this.draw()}onMouseOut(){this.xFocus=le,this.draw()}};function Fm(e){return e.toISOString().substring(0,10)}function Tm(e){let o=new Date;return o.setDate(o.getDate()-e),o}function Vm(e,o){let r=new Date(e);return r.setDate(r.getDate()+o),r}function Nm(e){return(e.getMonth()+1).toString()+"/"+e.getDate().toString()}function gt(e,o,r,t){let i=l(u(u(r,o),u(e,r)),u(e,o)),n=x(i,t),m=new Array(n.length);for(let s=0;s<m.length;s++)m[s]=n[s],s>0&&(m[s]+=m[s-1]);return m}var Yt={fast:3,slow:10};function Qm(e,o,r,t,i={}){let{fast:n,slow:m}={...Yt,...i},s=gt(e,o,r,t),c=u(g(s,{period:n}),g(s,{period:m}));return{adResult:s,cmoResult:c}}var Wt={fast:12,slow:26,signal:9};function es(e,o={}){let{fast:r,slow:t,signal:i}={...Wt,...o},n=g(e,{period:r}),m=g(e,{period:t}),s=p(100,l(u(n,m),m)),c=g(s,{period:i}),a=u(s,c);return{ppoResult:s,signal:c,histogram:a}}var jt={fast:12,slow:26,signal:9};function ns(e,o={}){let{fast:r,slow:t,signal:i}={...jt,...o},n=g(e,{period:r}),m=g(e,{period:t}),s=p(100,l(u(n,m),m)),c=g(s,{period:i}),a=u(s,c);return{pvoResult:s,signal:c,histogram:a}}var Kt={period:3};function ms(e,o={}){let{period:r}={...Kt,...o},t=new Array(e.length);for(let i=0;i<e.length;i++)i<r?t[i]=0:t[i]=(e[i]/e[i-r]-1)*100;return t}var Xt={period:20};function ys(e,o,r,t={}){let{period:i}={...Xt,...t},n=k(e,o,r),m=d(n,{period:i}),s=d(L(u(n,m)),{period:i});return l(u(n,m),p(.015,s))}var Jt={period:12};function Ms(e,o={}){let{period:r}={...Jt,...o},t=g(e,{period:r}),i=g(t,{period:r});return u(p(2,t),i)}var _t={emaPeriod:9,miPeriod:25};function Os(e,o,r={}){let{emaPeriod:t,miPeriod:i}={..._t,...r},n=g(u(e,o),{period:t}),m=g(n,{period:t}),s=l(n,m);return A(s,{period:i})}var Qt={period:14};function ks(e,o,r={}){let{period:t}={...Qt,...r};return d(u(o,e),{period:t})}var $t={period:4};function Vs(e,o={}){let{period:r}={...$t,...o},t=0,i=0;return r%2===0?(t=r/2,i=t+1):(t=(r+1)/2,i=t),d(d(e,{period:i}),{period:t})}var zt={period:4};function Gs(e,o={}){let{period:r}={...zt,...o},t=g(e,{period:r}),i=g(t,{period:r}),n=g(i,{period:r}),m=O(1,n[0],n);return l(u(n,m),m)}var Zt={period:2};function js(e,o={}){let{period:r}={...Zt,...o},t=g(e,{period:r}),i=g(t,{period:r}),n=g(i,{period:r});return h(u(p(3,t),p(3,i)),n)}var er={period:20};function _s(e,o,r={}){let{period:t}={...er,...r};return l(A(x(e,o),{period:t}),A(o,{period:t}))}function dt(e,o,r){b(e,o,r);let t=O(1,r[0],r);return V(u(e,o),L(u(e,t)),L(u(o,t)))}var tr={period:14};function H(e,o,r,t={}){let{period:i}={...tr,...t},n=dt(e,o,r),m=d(n,{period:i});return{trLine:n,atrLine:m}}var rr={period:90};function Iu(e,o={}){let{period:r}={...rr,...o},t=l(u(e.upper,e.lower),e.middle),i=g(t,{period:r});return{width:t,widthEma:i}}var or={period:22};function Fu(e,o,r,t={}){let{period:i}={...or,...t},n=H(e,o,r,{period:i}),m=p(3,n.atrLine),s=y(e,{period:i}),c=S(o,{period:i}),a=u(s,m),f=h(c,m);return{long:a,short:f}}var nr={period:4};function Hu(e,o={}){let{period:r}={...nr,...o},t=y(e,{period:r}),i=S(e,{period:r}),n=R(2,h(t,i));return{upper:t,middle:n,lower:i}}var ir={period:20};function ju(e,o,r,t={}){let{period:i}={...ir,...t},n=H(e,o,r,{period:i}),m=p(2,n.atrLine),s=g(r,{period:i}),c=h(s,m),a=u(s,m);return{middle:s,upper:c,lower:a}}var mr={period:14};function Qu(e,o={}){let{period:r}={...mr,...o},t=y(e,{period:r}),i=p(100,l(u(e,t),t)),n=d(x(i,i),{period:r});return be(n)}function ca(e,o){b(e,o);let r=new Array(e.length);r[0]=0;for(let t=1;t<r.length;t++)r[t]=r[t-1],e[t]>e[t-1]?r[t]+=o[t]:e[t]<e[t-1]&&(r[t]-=o[t]);return r}function da(e,o){let r=O(1,e[0],e),t=x(o,l(u(e,r),r));return A(t,{period:t.length})}export{re as ABDefaultConfig,U as AODefaultConfig,J as APODefaultConfig,tr as ATRDefaultConfig,Q as AroonDefaultConfig,oe as BBDefaultConfig,rr as BBWDefaultConfig,P as BinarySearchTree,Xt as CCIDefaultConfig,or as CEDefaultConfig,Fo as CFODefaultConfig,ie as CMFDefaultConfig,Yt as CMODefaultConfig,pt as Chart,Ct as CompanyResultSortBy,nr as DCDefaultConfig,Jt as DEMADefaultConfig,It as EMADefaultConfig,me as EMVDefaultConfig,se as FIDefaultConfig,Y as IchimokuCloudDefaultConfig,ir as KCDefaultConfig,$ as KDJDefaultConfig,z as MACDDefaultConfig,Bt as MCFODefaultConfig,ue as MFIDefaultConfig,_t as MIDefaultConfig,vt as MMaxDefaultConfig,Lt as MMinDefaultConfig,Pt as MSTDDefaultConfig,Et as MSumDefaultConfig,ae as NVIDefaultConfig,v as NumRange,B as NumScaler,ne as PODefaultConfig,Wt as PPODefaultConfig,ee as PSARDefaultConfig,jt as PVODefaultConfig,Qt as QstickDefaultConfig,Mt as RMADefaultConfig,Kt as ROCDefaultConfig,Dt as RSIDefaultConfig,At as SMADefaultConfig,pm as STRATEGY_INFOS,K as StochDefaultConfig,Tt as StrategyStatsSortBy,Zt as TEMADefaultConfig,$t as TRIMADefaultConfig,zt as TRIXDefaultConfig,Z as Trend,mr as UIDefaultConfig,fe as VWAPDefaultConfig,er as VWMADefaultConfig,te as VortexDefaultConfig,X as WillrDefaultConfig,Je as ab,L as abs,Ie as absolutePriceOscillator,Je as accelerationBands,gt as accumulationDistribution,gt as ad,h as add,M as addBy,Ce as ao,Ie as apo,Be as aroon,H as atr,H as averageTrueRange,Ce as awesomeOscillator,pr as backtest,Pe as balanceOfPower,$e as bb,Iu as bbw,$e as bollingerBands,Iu as bollingerBandsWidth,Pe as bop,ys as cci,Fu as ce,Ve as cfo,tt as chaikinMoneyFlow,Qm as chaikinOscillator,Ve as chandeForecastOscillator,Fu as chandelierExit,E as changes,b as checkSameLength,tt as cmf,Qm as cmo,ys as communityChannelIndex,dm as computeStrategyStats,Tm as daysAgo,Vm as daysLaterFrom,Hu as dc,Ms as dema,l as divide,R as divideBy,Hu as donchianChannel,Ms as doubleExponentialMovingAverage,ot as easeOfMovement,g as ema,ot as emv,g as exponentialMovingAverage,ge as extractSigns,it as fi,it as forceIndex,T as generateNumbers,ye as ichimokuCloud,ju as kc,qe as kdj,ju as keltnerChannel,Ot as leastSquare,Fe as linearRegressionUsingLeastSquare,Ge as macd,Os as massIndex,V as max,To as mcfo,st as mfi,Os as mi,y as mmax,S as mmin,st as moneyFlowIndex,Ge as movingAverageConvergenceDivergence,To as movingChandeForecastOscillator,N as movingLeastSquare,Te as movingLinearRegressionUsingLeastSquare,y as movingMax,S as movingMin,Qe as movingStandardDeviation,A as movingSum,Qe as mstd,A as msum,x as multiply,p as multiplyBy,at as negativeVolumeIndex,at as nvi,ca as obv,ca as onBalanceVolume,Ye as parabolicSAR,es as percentagePriceOscillator,ns as percentageVolumeOscillator,Ze as po,de as pow,es as ppo,ms as priceRateOfChange,Ze as projectionOscillator,Ye as psar,ns as pvo,ks as qstick,qe as randomIndex,Re as relativeStrengthIndex,j as rma,ms as roc,j as rollingMovingAverage,G as roundDigits,ur as roundDigitsAll,Re as rsi,xt as shiftLeftAndFillBy,pe as shiftLeftBy,O as shiftRightAndFillBy,F as shiftRightBy,d as simpleMovingAverage,_ as since,d as sma,dr as sortCompanyResults,bm as sortStrategyStats,be as sqrt,Me as stoch,Me as stochasticOscillator,u as subtract,sr as subtractBy,js as tema,Fm as toISODateString,Nm as toMonthAndDay,dt as tr,ht as transpose,Vs as triangularMovingAverage,Vs as trima,Gs as tripleExponentialAverage,js as tripleExponentialMovingAverage,Gs as trix,dt as trueRange,k as typicalPrice,k as typprice,Qu as ui,Qu as ulcerIndex,da as volumePriceTrend,ct as volumeWeightedAveragePrice,_s as volumeWeightedMovingAverage,Ke as vortex,da as vpt,ct as vwap,_s as vwma,Le as williamsR,Le as willr};
//# sourceMappingURL=index.js.map
