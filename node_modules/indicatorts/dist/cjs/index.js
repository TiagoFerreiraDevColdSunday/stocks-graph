"use strict";var fe=Object.defineProperty;var Qt=Object.getOwnPropertyDescriptor;var $t=Object.getOwnPropertyNames;var zt=Object.prototype.hasOwnProperty;var Zt=(e,r)=>{for(var o in r)fe(e,o,{get:r[o],enumerable:!0})},er=(e,r,o,t)=>{if(r&&typeof r=="object"||typeof r=="function")for(let i of $t(r))!zt.call(e,i)&&i!==o&&fe(e,i,{get:()=>r[i],enumerable:!(t=Qt(r,i))||t.enumerable});return e};var tr=e=>er(fe({},"__esModule",{value:!0}),e);var Kr={};Zt(Kr,{ABDefaultConfig:()=>ee,AODefaultConfig:()=>G,APODefaultConfig:()=>K,ATRDefaultConfig:()=>Yt,AroonDefaultConfig:()=>J,BBDefaultConfig:()=>te,BBWDefaultConfig:()=>Wt,BinarySearchTree:()=>P,CCIDefaultConfig:()=>Ft,CEDefaultConfig:()=>jt,CFODefaultConfig:()=>fr,CMFDefaultConfig:()=>oe,CMODefaultConfig:()=>Bt,Chart:()=>Ye,CompanyResultSortBy:()=>_e,DCDefaultConfig:()=>Kt,DEMADefaultConfig:()=>Tt,EMADefaultConfig:()=>st,EMVDefaultConfig:()=>ne,FIDefaultConfig:()=>ie,IchimokuCloudDefaultConfig:()=>U,KCDefaultConfig:()=>Xt,KDJDefaultConfig:()=>_,MACDDefaultConfig:()=>Q,MCFODefaultConfig:()=>lt,MFIDefaultConfig:()=>me,MIDefaultConfig:()=>Vt,MMaxDefaultConfig:()=>nt,MMinDefaultConfig:()=>ot,MSTDDefaultConfig:()=>yt,MSumDefaultConfig:()=>ht,NVIDefaultConfig:()=>se,NumRange:()=>v,NumScaler:()=>O,PODefaultConfig:()=>re,PPODefaultConfig:()=>Et,PSARDefaultConfig:()=>z,PVODefaultConfig:()=>Pt,QstickDefaultConfig:()=>Nt,RMADefaultConfig:()=>et,ROCDefaultConfig:()=>kt,RSIDefaultConfig:()=>tt,SMADefaultConfig:()=>$e,STRATEGY_INFOS:()=>lr,StochDefaultConfig:()=>W,StrategyStatsSortBy:()=>Ot,TEMADefaultConfig:()=>Gt,TRIMADefaultConfig:()=>qt,TRIXDefaultConfig:()=>Ht,Trend:()=>$,UIDefaultConfig:()=>Jt,VWAPDefaultConfig:()=>ue,VWMADefaultConfig:()=>Ut,VortexDefaultConfig:()=>Z,WillrDefaultConfig:()=>j,ab:()=>Be,abs:()=>D,absolutePriceOscillator:()=>ye,accelerationBands:()=>Be,accumulationDistribution:()=>We,ad:()=>We,add:()=>h,addBy:()=>w,ao:()=>de,apo:()=>ye,aroon:()=>Se,atr:()=>q,averageTrueRange:()=>q,awesomeOscillator:()=>de,backtest:()=>nr,balanceOfPower:()=>Re,bb:()=>Pe,bbw:()=>qr,bollingerBands:()=>Pe,bollingerBandsWidth:()=>qr,bop:()=>Re,cci:()=>Br,ce:()=>Hr,cfo:()=>De,chaikinMoneyFlow:()=>Fe,chaikinOscillator:()=>Lr,chandeForecastOscillator:()=>De,chandelierExit:()=>Hr,changes:()=>E,checkSameLength:()=>b,cmf:()=>Fe,cmo:()=>Lr,communityChannelIndex:()=>Br,computeStrategyStats:()=>dr,daysAgo:()=>wr,daysLaterFrom:()=>Mr,dc:()=>Gr,dema:()=>Er,divide:()=>l,divideBy:()=>R,donchianChannel:()=>Gr,doubleExponentialMovingAverage:()=>Er,easeOfMovement:()=>Te,ema:()=>g,emv:()=>Te,exponentialMovingAverage:()=>g,extractSigns:()=>le,fi:()=>Ve,forceIndex:()=>Ve,generateNumbers:()=>T,ichimokuCloud:()=>xe,kc:()=>Ur,kdj:()=>Le,keltnerChannel:()=>Ur,leastSquare:()=>ct,linearRegressionUsingLeastSquare:()=>we,macd:()=>ve,massIndex:()=>Pr,max:()=>V,mcfo:()=>cr,mfi:()=>Ne,mi:()=>Pr,mmax:()=>y,mmin:()=>S,moneyFlowIndex:()=>Ne,movingAverageConvergenceDivergence:()=>ve,movingChandeForecastOscillator:()=>cr,movingLeastSquare:()=>N,movingLinearRegressionUsingLeastSquare:()=>Me,movingMax:()=>y,movingMin:()=>S,movingStandardDeviation:()=>Ee,movingSum:()=>A,mstd:()=>Ee,msum:()=>A,multiply:()=>x,multiplyBy:()=>p,negativeVolumeIndex:()=>qe,nvi:()=>qe,obv:()=>Wr,onBalanceVolume:()=>Wr,parabolicSAR:()=>Ie,percentagePriceOscillator:()=>vr,percentageVolumeOscillator:()=>Ir,po:()=>ke,pow:()=>pe,ppo:()=>vr,priceRateOfChange:()=>Or,projectionOscillator:()=>ke,psar:()=>Ie,pvo:()=>Ir,qstick:()=>kr,randomIndex:()=>Le,relativeStrengthIndex:()=>he,rma:()=>Y,roc:()=>Or,rollingMovingAverage:()=>Y,roundDigits:()=>H,roundDigitsAll:()=>or,rsi:()=>he,shiftLeftAndFillBy:()=>Ke,shiftLeftBy:()=>ce,shiftRightAndFillBy:()=>I,shiftRightBy:()=>F,simpleMovingAverage:()=>d,since:()=>X,sma:()=>d,sortCompanyResults:()=>ir,sortStrategyStats:()=>br,sqrt:()=>ge,stoch:()=>Ce,stochasticOscillator:()=>Ce,subtract:()=>u,subtractBy:()=>rr,tema:()=>Vr,toISODateString:()=>Rr,toMonthAndDay:()=>Dr,tr:()=>je,transpose:()=>Xe,triangularMovingAverage:()=>Fr,trima:()=>Fr,tripleExponentialAverage:()=>Tr,tripleExponentialMovingAverage:()=>Vr,trix:()=>Tr,trueRange:()=>je,typicalPrice:()=>k,typprice:()=>k,ui:()=>Yr,ulcerIndex:()=>Yr,volumePriceTrend:()=>jr,volumeWeightedAveragePrice:()=>He,volumeWeightedMovingAverage:()=>Nr,vortex:()=>Oe,vpt:()=>jr,vwap:()=>He,vwma:()=>Nr,williamsR:()=>Ae,willr:()=>Ae});module.exports=tr(Kr);function b(...e){if(e.length>0){let r=e[0].length;for(let o=1;o<e.length;o++)if(e[o].length!==r)throw new Error(`values length at ${o} not ${r}`)}}function D(e){return e.map(r=>Math.abs(r))}function h(e,r){b(e,r);let o=new Array(e.length);for(let t=0;t<o.length;t++)o[t]=e[t]+r[t];return o}function w(e,r){let o=new Array(r.length);for(let t=0;t<r.length;t++)o[t]=r[t]+e;return o}function l(e,r){b(e,r);let o=new Array(e.length);for(let t=0;t<o.length;t++)o[t]=e[t]/r[t];return o}function R(e,r){let o=new Array(r.length);for(let t=0;t<r.length;t++)o[t]=r[t]/e;return o}function x(e,r){b(e,r);let o=new Array(e.length);for(let t=0;t<o.length;t++)o[t]=e[t]*r[t];return o}function p(e,r){let o=new Array(r.length);for(let t=0;t<o.length;t++)o[t]=r[t]*e;return o}function u(e,r){b(e,r);let o=new Array(e.length);for(let t=0;t<o.length;t++)o[t]=e[t]-r[t];return o}function rr(e,r){let o=new Array(r.length);for(let t=0;t<r.length;t++)o[t]=r[t]-e;return o}function I(e,r,o){let t=new Array(o.length);for(let i=0;i<t.length;i++)i<e?t[i]=r:t[i]=o[i-e];return t}function F(e,r){return I(e,0,r)}function Ke(e,r,o){let t=o.length,i=Array(t).fill(r);for(let n=e;n<t;n++){let m=(n-e+t)%t;i[m]=o[n]}return i}function ce(e,r){return Ke(e,0,r)}function E(e,r){return u(r,F(e,r))}function le(e){return e.map(r=>r>=0?1:-1)}function Xe(...e){b(...e);let r=new Array(e[0].length);for(let o=0;o<r.length;o++){r[o]=new Array(e.length);for(let t=0;t<r[o].length;t++)r[o][t]=e[t][o]}return r}function V(...e){return Xe(...e).map(r=>Math.max(...r))}function H(e,r){let o=Math.pow(10,e);return Math.round(r*o)/o}function or(e,r){return r.map(o=>H(e,o))}function T(e,r,o){let t=new Array((r-e)/o);for(let i=0;i<t.length;i++)t[i]=e+o*i;return t}function pe(e,r){return e.map(o=>Math.pow(o,r))}function ge(e){return e.map(r=>Math.sqrt(r))}function Je(e,r){b(e,r);let o=new Array(e.length),t=1,i=t,n=0;for(let m=0;m<o.length;m++)r[m]===1?i>0&&(n=i/e[m],i=0):r[m]===-1&&n>0&&(i=n*e[m],n=0),o[m]=(n*e[m]+i-t)/t;return o}function nr(e,r){let o=new Array(r.length);for(let t=0;t<o.length;t++){let i=r[t].strategy(e),n=Je(e.closings,i);o[t]={info:r[t],gain:n[n.length-1],lastAction:i[i.length-1]}}return o.sort((t,i)=>i.gain-t.gain),o}var _e=(n=>(n[n.SYMBOL=0]="SYMBOL",n[n.NAME=1]="NAME",n[n.STRATEGY=2]="STRATEGY",n[n.GAIN=3]="GAIN",n[n.ACTION=4]="ACTION",n))(_e||{});function ir(e,r,o){let t=[];switch(r){case 0:t=e.sort((i,n)=>i.companyInfo.symbol.localeCompare(n.companyInfo.symbol));break;case 1:t=e.sort((i,n)=>i.companyInfo.name.localeCompare(n.companyInfo.name));break;case 2:t=e.sort((i,n)=>i.strategyResults[0].info.name.localeCompare(n.strategyResults[0].info.name));break;case 3:t=e.sort((i,n)=>i.strategyResults[0].gain-n.strategyResults[0].gain);break;case 4:t=e.sort((i,n)=>i.strategyResults[0].lastAction-n.strategyResults[0].lastAction);break}return o||(t=t.reverse()),t}function Qe(e){return Array(e.closings.length).fill(1)}var $e={period:2};function d(e,r={}){let{period:o}={...$e,...r},t=new Array(e.length),i=0;for(let n=0;n<e.length;n++)i+=e[n],n>=o?(i-=e[n-o],t[n]=i/o):t[n]=i/(n+1);return t}var G={fast:5,slow:34};function de(e,r,o={}){let{fast:t,slow:i}={...G,...o},n=R(2,h(r,e)),m=d(n,{period:t}),s=d(n,{period:i});return u(m,s)}function ze(e,r={}){let o={...G,...r};return de(e.highs,e.lows,o).map(i=>i>0?1:i<0?-1:0)}var U={short:9,medium:26,long:52,close:26},be=({period:e,highs:r,lows:o,projection:t=0})=>(i,n,m)=>{if(m<e-1)return[...i,0];let s=m+1-e,c=m-t+1,a=Math.max(...r.slice(s,c)),f=Math.min(...o.slice(s,c));return[...i,(a+f)/2]},mr=({highs:e,lows:r,short:o})=>e.reduce(be({period:o,highs:e,lows:r}),[]),sr=({highs:e,lows:r,medium:o})=>e.reduce(be({period:o,highs:e,lows:r}),[]),ur=({tenkanSen:e,kijunSen:r,medium:o})=>{let t=new Array(r.length+o).fill(0);return r.forEach((i,n)=>{i&&(t[n+o]=(i+e[n])/2)}),t},ar=({highs:e,lows:r,long:o,medium:t})=>new Array(e.length+t).fill(0).reduce(be({period:o+t,highs:e,lows:r,projection:t}),[]);function xe(e,r,o,t={}){b(e,r,o);let{short:i,medium:n,long:m,close:s}={...U,...t},c=mr({highs:e,lows:r,short:i}),a=sr({highs:e,lows:r,medium:n});return{tenkan:c,kijun:a,ssa:ur({tenkanSen:c,kijunSen:a,medium:n}),ssb:ar({highs:e,lows:r,medium:n,long:m}),laggingSpan:ce(s,o)}}function Ze(e,r={}){let o={...U,...r},t=xe(e.highs,e.lows,e.closings,o),i=new Array(t.kijun.length);for(let n=0;n<i.length;n++)t.ssa[n]>t.ssb[n]?i[n]=1:t.ssa[n]<t.ssb[n]?i[n]=-1:i[n]=0;return i}var et={period:4};function Y(e,r={}){let{period:o}={...et,...r},t=new Array(e.length),i=0;for(let n=0;n<e.length;n++){let m=n+1;n<o?i+=e[n]:(i=t[n-1]*(o-1)+e[n],m=o),t[n]=i/m}return t}var tt={period:14};function he(e,r={}){let{period:o}={...tt,...r},t=new Array(e.length),i=new Array(e.length);t[0]=i[0]=0;for(let a=1;a<e.length;a++){let f=e[a]-e[a-1];f>0?(t[a]=f,i[a]=0):(i[a]=-f,t[a]=0)}let n=Y(t,{period:o}),m=Y(i,{period:o}),s=new Array(e.length),c=new Array(e.length);s[0]=c[0]=0;for(let a=1;a<e.length;a++)c[a]=n[a]/m[a],s[a]=100-100/(1+c[a]);return s}function rt(e){let r=he(e.closings,{period:2}),o=new Array(r.length);for(let t=0;t<o.length;t++)r[t]<10?o[t]=1:r[t]>90?o[t]=-1:o[t]=0;return o}var P=class e{constructor(){this.root=null}insert(r){let o={value:r,left:null,right:null};if(this.root===null){this.root=o;return}let t=this.root,i=!1;for(;!i;)o.value<=t.value?t.left===null?(t.left=o,i=!0):t=t.left:t.right===null?(t.right=o,i=!0):t=t.right}remove(r){let o={node:this.root,parent:null};for(;o.node!==null;){if(r===o.node.value)return this.removeNode(o),!0;o.parent=o.node,r<o.node.value?o.node=o.node.left:o.node=o.node.right}return!1}min(){let r=e.minNode(this.root);if(r.node===null)throw new Error("Tree empty");return r.node.value}max(){let r=e.maxNode(this.root);if(r.node===null)throw new Error("Tree empty");return r.node?.value}removeNode(r){if(r.node!==null)if(r.node.left!==null&&r.node.right!==null){let o=e.minNode(r.node.right);o.parent===null&&(o.parent=r.node),this.removeNode(o),o.node!==null&&(r.node.value=o.node.value)}else{let o=null;r.node.left!==null?o=r.node.left:o=r.node.right,r.parent===null?this.root=o:r.parent.left===r.node?r.parent.left=o:r.parent.right=o}}static minNode(r){let o={node:null,parent:null};if(r!==null)for(o.node=r;o.node.left!==null;)o.parent=o.node,o.node=o.node.left;return o}static maxNode(r){let o={node:null,parent:null};if(r!==null)for(o.node=r;o.node.right!==null;)o.parent=o.node,o.node=o.node.right;return o}};var ot={period:4};function S(e,r={}){let{period:o}={...ot,...r},t=new Array(e.length),i=new P;for(let n=0;n<e.length;n++)i.insert(e[n]),n>=o&&i.remove(e[n-o]),t[n]=i.min();return t}var nt={period:4};function y(e,r={}){let{period:o}={...nt,...r},t=new Array(e.length),i=new P;for(let n=0;n<e.length;n++)i.insert(e[n]),n>=o&&i.remove(e[n-o]),t[n]=i.max();return t}var W={kPeriod:14,dPeriod:3};function Ce(e,r,o,t={}){let{kPeriod:i,dPeriod:n}={...W,...t},m=y(e,{period:i}),s=S(r,{period:i}),c=p(100,l(u(o,s),u(m,s))),a=d(c,{period:n});return{k:c,d:a}}function it(e,r={}){let o={...W,...r},t=Ce(e.highs,e.lows,e.closings,o),i=new Array(t.k.length);for(let n=0;n<i.length;n++)t.k[n]>=80&&t.d[n]>=80?i[n]=-1:t.k[n]<=20&&t.d[n]<=20?i[n]=1:i[n]=0;return i}var j={period:14};function Ae(e,r,o,t={}){let{period:i}={...j,...t},n=y(e,{period:i}),m=S(r,{period:i});return p(-100,l(u(n,o),u(n,m)))}function mt(e,r={}){let o={...j,...r};return Ae(e.highs,e.lows,e.closings,o).map(i=>i<=-80?1:i>=-20?-1:0)}var st={period:12};function g(e,r={}){let{period:o}={...st,...r},t=new Array(e.length);if(t.length>0){let i=2/(1+o),n=1-i;t[0]=e[0];for(let m=1;m<t.length;m++)t[m]=e[m]*i+t[m-1]*n}return t}var K={fast:14,slow:30};function ye(e,r={}){let{fast:o,slow:t}={...K,...r},i=g(e,{period:o}),n=g(e,{period:t});return u(i,n)}function ut(e,r={}){let{fast:o,slow:t}={...K,...r},i=ye(e.closings,{fast:o,slow:t}),n=new Array(i.length);for(let m=0;m<n.length;m++)i[m]>0?n[m]=1:i[m]<0?n[m]=-1:n[m]=0;return n}function X(e){let r=new Array(e.length);if(e.length>0){let o=null,t=0;for(let i=0;i<e.length;i++)o!==e[i]?(o=e[i],t=0):t++,r[i]=t}return r}var J={period:25};function Se(e,r,o={}){b(e,r);let{period:t}={...J,...o},i=X(y(e,{period:t})),n=X(S(r,{period:t})),m=p(100,R(t,w(t,p(-1,i)))),s=p(100,R(t,w(t,p(-1,n))));return{up:m,down:s}}function at(e,r={}){let o={...J,...r},t=Se(e.highs,e.lows,o),i=new Array(t.up.length);for(let n=0;n<i.length;n++)t.up[n]>t.down[n]?i[n]=1:t.down[n]>t.up[n]?i[n]=-1:i[n]=0;return i}function Re(e,r,o,t){return l(u(t,e),u(r,o))}function ft(e){return Re(e.openings,e.highs,e.lows,e.closings).map(o=>o>0?1:o<0?-1:0)}function ct(e,r){b(e,r);let o=0,t=0,i=0,n=0;for(let a=0;a<e.length;a++)o+=e[a],t+=e[a]*e[a],i+=r[a],n+=e[a]*r[a];let m=e.length,s=(m*n-o*i)/(m*t-o*o),c=(i-s*o)/m;return{m:s,b:c}}function N(e,r,o){b(r,o);let t=new Array(r.length),i=new Array(r.length),n=0,m=0,s=0,c=0;for(let a=0;a<r.length;a++){n+=r[a],m+=r[a]*r[a],s+=o[a],c+=r[a]*o[a];let f=a+1;a>=e&&(n-=r[a-e],m-=r[a-e]*r[a-e],s-=o[a-e],c-=r[a-e]*o[a-e],f=e),a>0?(t[a]=(f*c-n*s)/(f*m-n*n),i[a]=(s-t[a]*n)/f):(t[a]=0,i[a]=0)}return{m:t,b:i}}function we(e,r){let o=ct(e,r);return w(o.b,p(o.m,e))}function Me(e,r,o){let t=N(e,r,o);return h(x(t.m,r),t.b)}var fr={period:4};function De(e){let r=T(0,e.length,1),o=we(r,e);return p(100,l(u(e,o),e))}var lt={period:4};function cr(e,r={}){let{period:o}={...lt,...r},t=T(0,e.length,1),i=Me(o,t,e);return p(100,l(u(e,i),e))}function pt(e){return De(e.closings).map(o=>o>0?1:o<0?-1:0)}var _={rPeriod:9,kPeriod:3,dPeriod:3};function Le(e,r,o,t={}){let{rPeriod:i,kPeriod:n,dPeriod:m}={..._,...t},s=y(e,{period:i}),c=S(r,{period:i}),a=p(100,l(u(o,c),u(s,c))),f=d(a,{period:n}),M=d(f,{period:m}),B=u(p(3,f),p(2,M));return{k:f,d:M,j:B}}function gt(e,r={}){let o={..._,...r},t=Le(e.highs,e.lows,e.closings,o),i=new Array(t.k.length);for(let n=0;n<i.length;n++)t.k[n]>t.d[n]&&t.k[n]<=20?i[n]=1:t.k[n]<t.d[n]&&t.k[n]>=80?i[n]=-1:i[n]=0;return i}var Q={fast:12,slow:26,signal:9};function ve(e,r={}){let{fast:o,slow:t,signal:i}={...Q,...r},n=g(e,{period:o}),m=g(e,{period:t}),s=u(n,m),c=g(s,{period:i});return{macdLine:s,signalLine:c}}function dt(e,r={}){let o={...Q,...r},t=ve(e.closings,o),i=new Array(t.macdLine.length);for(let n=0;n<i.length;n++)t.macdLine[n]>t.signalLine[n]?i[n]=1:t.macdLine[n]<t.signalLine[n]?i[n]=-1:i[n]=0;return i}var $=(t=>(t[t.FALLING=-1]="FALLING",t[t.STABLE=0]="STABLE",t[t.RISING=1]="RISING",t))($||{});var z={step:.02,max:.2};function Ie(e,r,o,t={}){b(e,r,o);let{step:i,max:n}={...z,...t},m=new Array(e.length),s=new Array(e.length);m[0]=-1,s[0]=e[0];let c=i,a=r[0];for(let f=1;f<s.length;f++){s[f]=s[f-1]-(s[f-1]-a)*c,m[f-1]===-1?(s[f]=Math.max(s[f],e[f-1]),f>1&&(s[f]=Math.max(s[f],e[f-2])),e[f]>=s[f]&&(s[f]=a)):(s[f]=Math.min(s[f],r[f-1]),f>1&&(s[f]=Math.min(s[f],r[f-2])),r[f]<=s[f]&&(s[f]=a));let M=a;s[f]>o[f]?(m[f]=-1,a=Math.min(a,r[f])):(m[f]=1,a=Math.max(a,e[f])),m[f]!==m[f-1]?c=i:M!==a&&c<n&&(c+=i)}return{trends:m,psarResult:s}}function bt(e,r={}){let o={...z,...r};return Ie(e.highs,e.lows,e.closings,o).trends.map(i=>{switch(i){case-1:return-1;case 1:return 1;case 0:return 0;default:return 0}})}function k(e,r,o){return R(3,h(h(e,r),o))}function xt(e){let r=k(e.highs,e.lows,e.closings),o=new Array(r.length);o[0]=0;for(let t=1;t<o.length;t++)r[t]>r[t-1]?o[t]=1:r[t]<r[t-1]?o[t]=-1:o[t]=0;return o}var ht={period:4};function A(e,r={}){let{period:o}={...ht,...r},t=new Array(e.length),i=0;for(let n=0;n<e.length;n++)i+=e[n],n>=o&&(i-=e[n-o]),t[n]=i;return t}var Z={period:14};function Oe(e,r,o,t={}){b(e,r,o);let{period:i}={...Z,...t},n=F(1,o),m=D(u(e,F(1,r))),s=D(u(r,F(1,e))),c=A(m,{period:i}),a=A(s,{period:i}),f=V(u(e,r),D(u(e,n)),D(u(r,n))),M=A(f,{period:i}),B=l(c,M),L=l(a,M);return{plus:B,minus:L}}function Ct(e,r={}){let o={...Z,...r},t=Oe(e.highs,e.lows,e.closings,o),i=new Array(t.plus.length);for(let n=0;n<i.length;n++)t.plus[n]>t.minus[n]?i[n]=1:t.plus[n]<t.minus[n]?i[n]=-1:i[n]=0;return i}var ee={period:20,multiplier:4};function Be(e,r,o,t={}){b(e,r,o);let{period:i,multiplier:n}={...ee,...t},m=l(u(e,r),h(e,r)),s=d(x(e,w(1,p(n,m))),{period:i}),c=d(o,{period:i}),a=d(x(r,w(1,p(-1*n,m))),{period:i});return{upper:s,middle:c,lower:a}}function At(e,r={}){let o={...ee,...r},t=Be(e.highs,e.lows,e.closings,o),i=new Array(t.upper.length);for(let n=0;n<i.length;n++)e.closings[n]>=t.upper[n]?i[n]=1:i[n]=-1;return i}var yt={period:4};function Ee(e,r={}){let{period:o}={...yt,...r},t=new Array(e.length),i=d(e,{period:o});for(let n=0;n<e.length;n++)if(t[n]=0,n>=o-1){let m=0;for(let s=n-(o-1);s<=n;s++)m+=(e[s]-i[n])*(e[s]-i[n]);t[n]=Math.sqrt(m/o)}return t}var te={period:20};function Pe(e,r={}){let{period:o}={...te,...r},t=p(2,Ee(e,{period:o})),i=d(e,{period:o}),n=h(i,t),m=u(i,t);return{upper:n,middle:i,lower:m}}function St(e,r={}){let o={...te,...r},t=Pe(e.closings,o),i=new Array(t.upper.length);for(let n=0;n<i.length;n++)e.closings[n]>t.upper[n]?i[n]=-1:e.closings[n]<t.lower[n]?i[n]=1:i[n]=0;return i}var re={period:14,smooth:3};function ke(e,r,o,t={}){let{period:i,smooth:n}={...re,...t},m=T(0,o.length,1),s=N(i,m,e),c=N(i,m,r),a=h(e,x(s.m,m)),f=h(r,x(c.m,m)),M=y(a,{period:i}),B=S(f,{period:i}),L=l(p(100,u(o,B)),u(M,B)),_t=g(L,{period:n});return{poResult:L,spoResult:_t}}function Rt(e,r={}){let o={...re,...r},t=ke(e.highs,e.lows,e.closings,o),i=new Array(t.poResult.length);for(let n=0;n<i.length;n++)t.poResult[n]>t.spoResult[n]?i[n]=1:t.poResult[n]<t.spoResult[n]?i[n]=-1:i[n]=0;return i}var oe={period:20};function Fe(e,r,o,t,i={}){let{period:n}={...oe,...i},m=l(u(u(o,r),u(e,o)),u(e,r)),s=x(m,t);return l(A(s,{period:n}),A(t,{period:n}))}function wt(e,r={}){let o={...oe,...r};return Fe(e.highs,e.lows,e.closings,e.volumes,o).map(i=>i<0?1:i>0?-1:0)}var ne={period:14};function Te(e,r,o,t={}){let{period:i}={...ne,...t},n=E(1,R(2,h(e,r))),m=l(R(1e8,o),u(e,r));return d(l(n,m),{period:i})}function Mt(e,r={}){let o={...ne,...r};return Te(e.highs,e.lows,e.volumes,o).map(i=>i>0?1:i<0?-1:0)}var ie={period:13};function Ve(e,r,o={}){let{period:t}={...ie,...o};return g(x(E(1,e),r),{period:t})}function Dt(e,r={}){let o={...ie,...r};return Ve(e.closings,e.volumes,o).map(i=>i>0?1:i<0?-1:0)}var me={period:14};function Ne(e,r,o,t,i={}){let{period:n}={...me,...i},m=x(k(e,r,o),t),s=le(E(1,m)),c=x(s,m),a=c.map(L=>L>=0?L:0),f=c.map(L=>L<0?L:0),M=l(A(a,{period:n}),A(p(-1,f),{period:n}));return w(100,p(-100,pe(w(1,M),-1)))}function Lt(e,r={}){let o={...me,...r};return Ne(e.highs,e.lows,e.closings,e.volumes,o).map(i=>i>=80?-1:1)}var se={start:1e3,period:255};function qe(e,r,o={}){b(e,r);let{start:t}={...se,...o},i=new Array(e.length);for(let n=0;n<i.length;n++)n===0?i[n]=t:r[n-1]<r[n]?i[n]=i[n-1]:i[n]=i[n-1]+(e[n]-e[n-1])/e[n-1]*i[n-1];return i}function vt(e,r={}){let o={...se,...r},t=qe(e.closings,e.volumes,o),i=g(t,{period:o.period}),n=new Array(t.length);for(let m=0;m<n.length;m++)t[m]<i[m]?n[m]=1:t[m]>i[m]?n[m]=-1:n[m]=0;return n}var ue={period:14};function He(e,r,o={}){let{period:t}={...ue,...o};return l(A(x(e,r),{period:t}),A(r,{period:t}))}function It(e,r={}){let o={...ue,...r},t=He(e.closings,e.volumes,o);return u(t,e.closings).map(n=>n>0?1:n<0?-1:0)}var lr=[{name:"Buy Hold",strategy:Qe},{name:"Awesome Oscillator",strategy:ze},{name:"RSI 2",strategy:rt},{name:"Ichimoku Cloud",strategy:Ze},{name:"Stochastic Oscillator",strategy:it},{name:"Williams R",strategy:mt},{name:"Absolute Price Oscillator (APO)",strategy:ut},{name:"Aroon Strategy",strategy:at},{name:"Balance of Power (BOM)",strategy:ft},{name:"Chande Forecast Oscillator (CFO)",strategy:pt},{name:"KDJ Strategy",strategy:gt},{name:"MACD Strategy",strategy:dt},{name:"Parabolic SAR",strategy:bt},{name:"Typical Price",strategy:xt},{name:"Vortex Strategy",strategy:Ct},{name:"Acceleration Bands",strategy:At},{name:"Bollinger Bands",strategy:St},{name:"Projection Oscillator",strategy:Rt},{name:"Chaikin Money Flow (CMF)",strategy:wt},{name:"Ease of Movement (EMV)",strategy:Mt},{name:"Force Index",strategy:Dt},{name:"Money Flow Index",strategy:Lt},{name:"Negative Volume Index (NVI)",strategy:vt},{name:"Volume Weighted Average Price",strategy:It}];function pr(e){return{strategyInfo:e.info,score:1,minGain:e.gain,maxGain:e.gain,averageGain:e.gain}}function gr(e,r){e.score++,e.minGain=Math.min(e.minGain,r.gain),e.maxGain=Math.max(e.maxGain,r.gain),e.averageGain=(e.averageGain+r.gain)/2}function dr(e){let r=new Map;for(let t of e){let i=t.strategyResults[0],n=r.get(i.info.name);n!==void 0?gr(n,i):r.set(i.info.name,pr(i))}let o=Array.from(r.values());return o.sort((t,i)=>i.score-t.score),o}var Ot=(n=>(n[n.STRATEGY=0]="STRATEGY",n[n.SCORE=1]="SCORE",n[n.MIN=2]="MIN",n[n.MAX=3]="MAX",n[n.AVERAGE=4]="AVERAGE",n))(Ot||{});function br(e,r,o){let t=[];switch(r){case 0:t=e.sort((i,n)=>i.strategyInfo.name.localeCompare(n.strategyInfo.name));break;case 1:t=e.sort((i,n)=>i.score-n.score);break;case 2:t=e.sort((i,n)=>i.minGain-n.minGain);break;case 3:t=e.sort((i,n)=>i.maxGain-n.maxGain);break;case 4:t=e.sort((i,n)=>i.averageGain-n.averageGain);break}return o||(t=t.reverse()),t}var v=class e{constructor(r,o){this.min=r,this.max=o}getMin(){return this.min}getMax(){return this.max}span(){return this.max-this.min}static merge(r){return r.reduce((o,t)=>new e(Math.min(o.min,t.min),Math.max(o.max,t.max)))}static from(r){return new e(Math.min(...r),Math.max(...r))}};var O=class{constructor(r,o){this.fromDelta=r.getMin(),this.toDelta=o.getMin(),this.multiplier=o.span()/r.span()}scale(r){return(r-this.fromDelta)*this.multiplier+this.toDelta}descale(r){return(r-this.toDelta)/this.multiplier+this.fromDelta}};var xr="black",hr=1,Cr="red",Ar=1,yr=30,Ge=4,Sr="14px Arial",Ue=-1,ae=new v(0,1),Ye=class{constructor(r){let o=document.getElementById(r);if(o===null)throw new Error("Canvas element not found");if(!(o instanceof HTMLCanvasElement))throw new Error("Not a canvas element");this.canvas=o;let t=this.canvas.getContext("2d");if(t===null)throw new Error("Canvas context is null");this.context=t,this.dataSets=new Map,this.dateSetsChanged=!1,this.xScaler=new O(ae,ae),this.yScaler=new O(ae,ae),this.xFocus=Ue,this.canvas.addEventListener("mousemove",i=>this.onMouseMove(i)),this.canvas.addEventListener("mouseout",()=>this.onMouseOut())}add(r){this.dataSets.set(r.legend,r),this.dateSetsChanged=!0}remove(r){let o=this.dataSets.delete(r);return o&&(this.dateSetsChanged=!0),o}draw(){this.dateSetsChanged&&(this.updateScalers(),this.dateSetsChanged=!1),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.drawDataSets(),this.drawFocus()}drawDataSets(){let r=this.chartHeight();for(let o of this.dataSets.values()){this.context.lineWidth=o.width??hr;let t=0,i=0;for(let n=0;n<o.values.length;n++){let m=this.xScaler.scale(n),s=r-this.yScaler.scale(o.values[n]);n>0&&(this.context.strokeStyle=this.styleAtIndex(o,n),this.context.beginPath(),this.context.moveTo(t,i),this.context.lineTo(m,s),this.context.stroke()),t=m,i=s}}}styleAtIndex(r,o){return r.style===void 0?xr:Array.isArray(r.style)?r.style[o]:r.style}drawFocus(){this.xFocus!==Ue&&(this.drawFocusLine(),this.drawFocusedValues())}drawFocusLine(){this.context.strokeStyle=Cr,this.context.lineWidth=Ar,this.context.beginPath(),this.context.moveTo(this.xFocus,0),this.context.lineTo(this.xFocus,this.chartHeight()),this.context.stroke()}drawFocusedValues(){let r=Math.round(this.xScaler.descale(this.xFocus)),o=Ge;this.context.font=Sr,this.context.textBaseline="bottom";for(let t of this.dataSets.values())if(r>=0&&r<t.values.length){let i=t.legend+" "+H(2,t.values[r]).toString();this.context.fillStyle=this.styleAtIndex(t,r),this.context.fillText(i,o,this.canvas.height-Ge),o+=this.context.measureText(i).width+Ge}}chartHeight(){return this.canvas.height-yr}updateScalers(){this.dataSets.size!==0&&(this.xScaler=new O(new v(0,Math.max(...Array.from(this.dataSets.values(),r=>r.values.length))),new v(0,this.canvas.width)),this.yScaler=new O(v.merge(Array.from(this.dataSets.values(),r=>v.from(r.values))),new v(0,this.chartHeight())))}onMouseMove(r){let o=this.canvas.getBoundingClientRect();this.xFocus=r.clientX-o.left,this.draw()}onMouseOut(){this.xFocus=Ue,this.draw()}};function Rr(e){return e.toISOString().substring(0,10)}function wr(e){let r=new Date;return r.setDate(r.getDate()-e),r}function Mr(e,r){let o=new Date(e);return o.setDate(o.getDate()+r),o}function Dr(e){return(e.getMonth()+1).toString()+"/"+e.getDate().toString()}function We(e,r,o,t){let i=l(u(u(o,r),u(e,o)),u(e,r)),n=x(i,t),m=new Array(n.length);for(let s=0;s<m.length;s++)m[s]=n[s],s>0&&(m[s]+=m[s-1]);return m}var Bt={fast:3,slow:10};function Lr(e,r,o,t,i={}){let{fast:n,slow:m}={...Bt,...i},s=We(e,r,o,t),c=u(g(s,{period:n}),g(s,{period:m}));return{adResult:s,cmoResult:c}}var Et={fast:12,slow:26,signal:9};function vr(e,r={}){let{fast:o,slow:t,signal:i}={...Et,...r},n=g(e,{period:o}),m=g(e,{period:t}),s=p(100,l(u(n,m),m)),c=g(s,{period:i}),a=u(s,c);return{ppoResult:s,signal:c,histogram:a}}var Pt={fast:12,slow:26,signal:9};function Ir(e,r={}){let{fast:o,slow:t,signal:i}={...Pt,...r},n=g(e,{period:o}),m=g(e,{period:t}),s=p(100,l(u(n,m),m)),c=g(s,{period:i}),a=u(s,c);return{pvoResult:s,signal:c,histogram:a}}var kt={period:3};function Or(e,r={}){let{period:o}={...kt,...r},t=new Array(e.length);for(let i=0;i<e.length;i++)i<o?t[i]=0:t[i]=(e[i]/e[i-o]-1)*100;return t}var Ft={period:20};function Br(e,r,o,t={}){let{period:i}={...Ft,...t},n=k(e,r,o),m=d(n,{period:i}),s=d(D(u(n,m)),{period:i});return l(u(n,m),p(.015,s))}var Tt={period:12};function Er(e,r={}){let{period:o}={...Tt,...r},t=g(e,{period:o}),i=g(t,{period:o});return u(p(2,t),i)}var Vt={emaPeriod:9,miPeriod:25};function Pr(e,r,o={}){let{emaPeriod:t,miPeriod:i}={...Vt,...o},n=g(u(e,r),{period:t}),m=g(n,{period:t}),s=l(n,m);return A(s,{period:i})}var Nt={period:14};function kr(e,r,o={}){let{period:t}={...Nt,...o};return d(u(r,e),{period:t})}var qt={period:4};function Fr(e,r={}){let{period:o}={...qt,...r},t=0,i=0;return o%2===0?(t=o/2,i=t+1):(t=(o+1)/2,i=t),d(d(e,{period:i}),{period:t})}var Ht={period:4};function Tr(e,r={}){let{period:o}={...Ht,...r},t=g(e,{period:o}),i=g(t,{period:o}),n=g(i,{period:o}),m=I(1,n[0],n);return l(u(n,m),m)}var Gt={period:2};function Vr(e,r={}){let{period:o}={...Gt,...r},t=g(e,{period:o}),i=g(t,{period:o}),n=g(i,{period:o});return h(u(p(3,t),p(3,i)),n)}var Ut={period:20};function Nr(e,r,o={}){let{period:t}={...Ut,...o};return l(A(x(e,r),{period:t}),A(r,{period:t}))}function je(e,r,o){b(e,r,o);let t=I(1,o[0],o);return V(u(e,r),D(u(e,t)),D(u(r,t)))}var Yt={period:14};function q(e,r,o,t={}){let{period:i}={...Yt,...t},n=je(e,r,o),m=d(n,{period:i});return{trLine:n,atrLine:m}}var Wt={period:90};function qr(e,r={}){let{period:o}={...Wt,...r},t=l(u(e.upper,e.lower),e.middle),i=g(t,{period:o});return{width:t,widthEma:i}}var jt={period:22};function Hr(e,r,o,t={}){let{period:i}={...jt,...t},n=q(e,r,o,{period:i}),m=p(3,n.atrLine),s=y(e,{period:i}),c=S(r,{period:i}),a=u(s,m),f=h(c,m);return{long:a,short:f}}var Kt={period:4};function Gr(e,r={}){let{period:o}={...Kt,...r},t=y(e,{period:o}),i=S(e,{period:o}),n=R(2,h(t,i));return{upper:t,middle:n,lower:i}}var Xt={period:20};function Ur(e,r,o,t={}){let{period:i}={...Xt,...t},n=q(e,r,o,{period:i}),m=p(2,n.atrLine),s=g(o,{period:i}),c=h(s,m),a=u(s,m);return{middle:s,upper:c,lower:a}}var Jt={period:14};function Yr(e,r={}){let{period:o}={...Jt,...r},t=y(e,{period:o}),i=p(100,l(u(e,t),t)),n=d(x(i,i),{period:o});return ge(n)}function Wr(e,r){b(e,r);let o=new Array(e.length);o[0]=0;for(let t=1;t<o.length;t++)o[t]=o[t-1],e[t]>e[t-1]?o[t]+=r[t]:e[t]<e[t-1]&&(o[t]-=r[t]);return o}function jr(e,r){let o=I(1,e[0],e),t=x(r,l(u(e,o),o));return A(t,{period:t.length})}0&&(module.exports={ABDefaultConfig,AODefaultConfig,APODefaultConfig,ATRDefaultConfig,AroonDefaultConfig,BBDefaultConfig,BBWDefaultConfig,BinarySearchTree,CCIDefaultConfig,CEDefaultConfig,CFODefaultConfig,CMFDefaultConfig,CMODefaultConfig,Chart,CompanyResultSortBy,DCDefaultConfig,DEMADefaultConfig,EMADefaultConfig,EMVDefaultConfig,FIDefaultConfig,IchimokuCloudDefaultConfig,KCDefaultConfig,KDJDefaultConfig,MACDDefaultConfig,MCFODefaultConfig,MFIDefaultConfig,MIDefaultConfig,MMaxDefaultConfig,MMinDefaultConfig,MSTDDefaultConfig,MSumDefaultConfig,NVIDefaultConfig,NumRange,NumScaler,PODefaultConfig,PPODefaultConfig,PSARDefaultConfig,PVODefaultConfig,QstickDefaultConfig,RMADefaultConfig,ROCDefaultConfig,RSIDefaultConfig,SMADefaultConfig,STRATEGY_INFOS,StochDefaultConfig,StrategyStatsSortBy,TEMADefaultConfig,TRIMADefaultConfig,TRIXDefaultConfig,Trend,UIDefaultConfig,VWAPDefaultConfig,VWMADefaultConfig,VortexDefaultConfig,WillrDefaultConfig,ab,abs,absolutePriceOscillator,accelerationBands,accumulationDistribution,ad,add,addBy,ao,apo,aroon,atr,averageTrueRange,awesomeOscillator,backtest,balanceOfPower,bb,bbw,bollingerBands,bollingerBandsWidth,bop,cci,ce,cfo,chaikinMoneyFlow,chaikinOscillator,chandeForecastOscillator,chandelierExit,changes,checkSameLength,cmf,cmo,communityChannelIndex,computeStrategyStats,daysAgo,daysLaterFrom,dc,dema,divide,divideBy,donchianChannel,doubleExponentialMovingAverage,easeOfMovement,ema,emv,exponentialMovingAverage,extractSigns,fi,forceIndex,generateNumbers,ichimokuCloud,kc,kdj,keltnerChannel,leastSquare,linearRegressionUsingLeastSquare,macd,massIndex,max,mcfo,mfi,mi,mmax,mmin,moneyFlowIndex,movingAverageConvergenceDivergence,movingChandeForecastOscillator,movingLeastSquare,movingLinearRegressionUsingLeastSquare,movingMax,movingMin,movingStandardDeviation,movingSum,mstd,msum,multiply,multiplyBy,negativeVolumeIndex,nvi,obv,onBalanceVolume,parabolicSAR,percentagePriceOscillator,percentageVolumeOscillator,po,pow,ppo,priceRateOfChange,projectionOscillator,psar,pvo,qstick,randomIndex,relativeStrengthIndex,rma,roc,rollingMovingAverage,roundDigits,roundDigitsAll,rsi,shiftLeftAndFillBy,shiftLeftBy,shiftRightAndFillBy,shiftRightBy,simpleMovingAverage,since,sma,sortCompanyResults,sortStrategyStats,sqrt,stoch,stochasticOscillator,subtract,subtractBy,tema,toISODateString,toMonthAndDay,tr,transpose,triangularMovingAverage,trima,tripleExponentialAverage,tripleExponentialMovingAverage,trix,trueRange,typicalPrice,typprice,ui,ulcerIndex,volumePriceTrend,volumeWeightedAveragePrice,volumeWeightedMovingAverage,vortex,vpt,vwap,vwma,williamsR,willr});
//# sourceMappingURL=index.js.map
